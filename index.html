<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ফটো ব্যাকগ্রাউন্ড রিমুভার | তাৎক্ষণিক ও নিখুঁত</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals with a Vibrant Blue Accent -->
    <!-- Application Structure Plan: একটি সিঙ্গেল-পেজ ল্যান্ডিং পেজ ডিজাইন করা হয়েছে যা ব্যবহারকারীকে একটি পরিষ্কার এবং যৌক্তিক পথে চালিত করে। প্রথমে একটি আকর্ষণীয় হিরো সেকশন যা টুলের মূল সুবিধা তুলে ধরে এবং ছবি আপলোডের জন্য একটি বড় কল-টু-অ্যাকশন (CTA) বাটন রয়েছে। এর পরে 'কিভাবে কাজ করে' সেকশনটি সহজ ধাপে প্রক্রিয়াটি ব্যাখ্যা করে। 'ফিচার' এবং 'ব্যবহারের ক্ষেত্র' সেকশনগুলো টুলের ক্ষমতা এবং উপযোগিতা তুলে ধরে। একটি ইন্টারেক্টিভ 'আগে ও পরে' স্লাইডার ব্যবহারকারীর বিশ্বাস অর্জন করতে সাহায্য করে। সবশেষে, একটি FAQ এবং চূড়ান্ত CTA সেকশন ব্যবহারকারীর সম্ভাব্য প্রশ্নগুলোর উত্তর দেয় এবং তাকে টুলটি ব্যবহারে উৎসাহিত করে। এই কাঠামোটি ব্যবহারকারীকে তথ্য দিয়ে শিক্ষিত করা এবং তাকে টুলটি ব্যবহারে আত্মবিশ্বাসী করে তোলার জন্য সর্বোত্তম। -->
    <!-- Visualization & Content Choices: টুলের ধারণা -> লক্ষ্য: ব্যবহারকারীকে আকৃষ্ট করা এবং টুলটি ব্যবহারে উৎসাহিত করা। -> পদ্ধতি: একটি ইন্টারেক্টিভ এবং তথ্যবহুল ওয়েবপেজ। -> মিথস্ক্রিয়া: ছবি আপলোড বাটন, আগে-পরে তুলনা করার জন্য ইমেজ স্লাইডার, এবং FAQ অ্যাকর্ডিয়ন। -> ন্যায্যতা: এই ডিজাইনটি শুধুমাত্র তথ্য প্রদান করে না, বরং ব্যবহারকারীকে টুলের কার্যকারিতা بصريভাবে (visually) দেখানোর মাধ্যমে তার আস্থা অর্জন করে। ইমেজ স্লাইডারটি টুলের ক্ষমতা প্রমাণের জন্য সবচেয়ে কার্যকর উপায়। FAQ বিভাগটি সাধারণ প্রশ্নের উত্তর দিয়ে ব্যবহারকারীর দ্বিধা দূর করে। -> লাইব্রেরি/পদ্ধতি: শুধুমাত্র HTML, Tailwind CSS এবং Vanilla JavaScript ব্যবহার করা হয়েছে। -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Hind Siliguri', sans-serif; background-color: #F7F9FC; color: #1A202C; }
        .gradient-bg { background: linear-gradient(135deg, #E0F7FA 0%, #FFFFFF 100%); transition: background-color 0.3s ease; }
        .cta-button { transition: all 0.3s ease; box-shadow: 0 4px 14px 0 rgba(0, 118, 255, 0.39); }
        .cta-button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px 0 rgba(0, 118, 255, 0.23); }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .drag-over-style { border: 3px dashed #007BFF !important; background-color: #EBF8FF; }
        .history-thumbnail {
            width: 100px; height: 100px; object-fit: cover; border-radius: 8px; cursor: pointer;
            border: 2px solid #e2e8f0; transition: all 0.2s ease-in-out;
        }
        .history-thumbnail:hover { border-color: #3498db; transform: scale(1.05); }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-blue-600"><span>রিমুভ<span class="text-gray-800">বিজি</span></span></div>
            <a href="#history-section" class="text-gray-600 hover:text-blue-600 transition hidden md:inline">আপনার কাজ</a>
        </nav>
    </header>

    <main>
        <section id="drop-zone" class="gradient-bg pt-20 pb-24 text-center border-4 border-dashed border-transparent">
            <div class="container mx-auto px-6">
                <h1 class="text-4xl md:text-6xl font-extrabold text-gray-800 leading-tight mb-4">ছবির ব্যাকগ্রাউন্ড সরান, সম্পূর্ণ বিনামূল্যে</h1>
                <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto mb-8">মাত্র এক ক্লিকে, যেকোনো ছবির ব্যাকগ্রাউন্ড স্বয়ংক্রিয়ভাবে এবং নিখুঁতভাবে মুছে ফেলুন।</p>
                <div class="flex flex-col sm:flex-row justify-center items-center gap-4 pointer-events-none">
                    <label for="image-upload" class="w-full sm:w-auto cursor-pointer bg-blue-600 text-white px-8 py-4 rounded-full font-bold text-lg cta-button inline-block pointer-events-auto">
                        ছবি আপলোড করুন
                    </label>
                    <input type="file" id="image-upload" class="hidden" accept="image/*">
                    <p class="text-gray-500 text-sm">অথবা একটি ফাইল এখানে টেনে আনুন</p>
                </div>
            </div>
        </section>

        <!-- Result Section -->
        <section id="result-section" class="py-10 hidden">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">আপনার ফলাফল</h2>
                <div id="loading" class="flex flex-col items-center justify-center min-h-[300px]">
                    <div class="loader"></div>
                    <p class="text-gray-600 mt-4">ব্যাকগ্রাউন্ড সরানো হচ্ছে, অনুগ্রহ করে অপেক্ষা করুন...</p>
                </div>
                <div id="result-display" class="hidden">
                    <div class="max-w-xl mx-auto bg-white p-4 rounded-lg shadow-lg">
                        <img id="result-image" src="" alt="ব্যাকগ্রাউন্ড সরানো ছবি" class="mx-auto rounded">
                    </div>
                    <a id="download-btn" href="#" download="background-removed-image.png" class="mt-6 inline-block bg-green-500 text-white px-8 py-3 rounded-full font-bold text-lg cta-button hover:bg-green-600">
                        ডাউনলোড করুন
                    </a>
                </div>
                <div id="error-message" class="hidden text-red-500 mt-4 bg-red-100 p-4 rounded-lg"></div>
            </div>
        </section>

        <!-- History Section -->
        <section id="history-section" class="py-10 bg-white border-t hidden">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">আপনার সাম্প্রতিক কাজ</h2>
                <div id="history-container" class="flex gap-4 justify-center flex-wrap">
                    <p id="no-history-msg" class="text-gray-500">এখানে এখনো কোনো কাজ নেই।</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; ২০২৫ রিমুভবিজি। সর্বস্বত্ব সংরক্ষিত।</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const dropZone = document.getElementById('drop-zone');
            const imageUpload = document.getElementById('image-upload');
            const resultSection = document.getElementById('result-section');
            const loading = document.getElementById('loading');
            const resultDisplay = document.getElementById('result-display');
            const resultImage = document.getElementById('result-image');
            const downloadBtn = document.getElementById('download-btn');
            const errorMessage = document.getElementById('error-message');
            const historySection = document.getElementById('history-section');
            const historyContainer = document.getElementById('history-container');
            const noHistoryMsg = document.getElementById('no-history-msg');

            // আপনার দেওয়া API Key এখানে যুক্ত করা হয়েছে।
            const apiKey = 'MKyYqxAq4QEoPcGSYZPUKSMK'; 
            
            // Drag and Drop Event Listeners
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            dropZone.addEventListener('dragover', () => dropZone.classList.add('drag-over-style'));
            dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over-style'));

            dropZone.addEventListener('drop', (event) => {
                dropZone.classList.remove('drag-over-style');
                const files = event.dataTransfer.files;
                if (files.length > 0) handleFile(files[0]);
            });

            // Button Click Event Listener
            imageUpload.addEventListener('change', (event) => {
                const files = event.target.files;
                if (files.length > 0) handleFile(files[0]);
            });

            function handleFile(file) {
                if (!file || !file.type.startsWith('image/')) {
                    showError('অনুগ্রহ করে একটি সঠিক ইমেজ ফাইল নির্বাচন করুন।');
                    return;
                }
                
                resultSection.classList.remove('hidden');
                loading.classList.remove('hidden');
                resultDisplay.classList.add('hidden');
                errorMessage.classList.add('hidden');
                window.scrollTo({ top: resultSection.offsetTop, behavior: 'smooth' });

                const formData = new FormData();
                formData.append('image_file', file);
                formData.append('size', 'auto');

                fetch('https://api.remove.bg/v1.0/removebg', {
                    method: 'POST',
                    headers: { 'X-Api-Key': apiKey },
                    body: formData
                })
                .then(response => {
                    if (!response.ok) {
                        return response.json().then(err => { 
                            const errorMsg = err.errors ? err.errors[0].title : 'একটি অজানা সমস্যা হয়েছে।';
                            throw new Error(errorMsg);
                        });
                    }
                    return response.blob();
                })
                .then(blob => {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        const base64data = reader.result;
                        displayResult(base64data);
                        saveToHistory(base64data);
                        renderHistory();
                    };
                    reader.readAsDataURL(blob);
                })
                .catch(error => {
                    showError(`ত্রুটি: ${error.message}`);
                });
            }

            function displayResult(imageDataUrl) {
                resultImage.src = imageDataUrl;
                downloadBtn.href = imageDataUrl;
                loading.classList.add('hidden');
                resultDisplay.classList.remove('hidden');
            }

            function showError(message) {
                loading.classList.add('hidden');
                resultDisplay.classList.add('hidden');
                errorMessage.textContent = message;
                errorMessage.classList.remove('hidden');
                resultSection.classList.remove('hidden');
                window.scrollTo({ top: resultSection.offsetTop, behavior: 'smooth' });
            }

            function getHistory() {
                const history = localStorage.getItem('bgRemovalHistory');
                return history ? JSON.parse(history) : [];
            }

            function saveToHistory(base64data) {
                let history = getHistory();
                history.unshift(base64data); // Add new image to the beginning
                if (history.length > 5) {
                    history = history.slice(0, 5); // Keep only the latest 5
                }
                localStorage.setItem('bgRemovalHistory', JSON.stringify(history));
            }

            function renderHistory() {
                const history = getHistory();
                historyContainer.innerHTML = ''; // Clear previous items

                if (history.length === 0) {
                    noHistoryMsg.style.display = 'block';
                    historySection.classList.add('hidden');
                } else {
                    historySection.classList.remove('hidden');
                    if (noHistoryMsg) noHistoryMsg.style.display = 'none';
                    
                    history.forEach(imageDataUrl => {
                        const img = document.createElement('img');
                        img.src = imageDataUrl;
                        img.className = 'history-thumbnail';
                        img.alt = 'Saved work';
                        
                        img.addEventListener('click', () => {
                            displayResult(imageDataUrl);
                            window.scrollTo({ top: resultSection.offsetTop, behavior: 'smooth' });
                        });
                        
                        historyContainer.appendChild(img);
                    });
                }
            }
            
            // Render history on initial page load
            renderHistory();
        });
    </script>
</body>
</html>

